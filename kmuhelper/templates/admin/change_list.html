{% extends "admin/change_list.html" %}
{% load static %}

{% block extrahead %}
<script>
window.addEventListener("load", function () {
    var isSubmitting = false;
    var $ = django.jQuery;

    $(document).ready(function () {
        $('form').submit(function(){
            isSubmitting = true
        })

        $('form').data('initial-state', $('form').serialize());

        $(window).on('beforeunload', function() {
            if (!isSubmitting && $('form').serialize() != $('form').data('initial-state')){
                return 'Du hast ungesicherte Änderungen vorgenommen. Wenn du die Seite verlässt, werden diese gelöscht.'
            }
        });
    })
})
</script>
{{ block.super }}
{% endblock %}
